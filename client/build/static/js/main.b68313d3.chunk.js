(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(20),a=n.n(s),i=(n(26),n(3)),r=(n(27),n(5)),l=n(4),o=n.n(l),j=n(0);function u(e){return console.log("logging props.user",e.user),Object(j.jsx)("nav",{className:"topnav",children:e.user?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(r.b,{to:"/",children:Object(j.jsx)("p",{children:"Home"})}),Object(j.jsx)(r.b,{to:"/items",children:Object(j.jsx)("p",{children:"Items"})}),Object(j.jsx)(r.b,{to:"/items/add",children:Object(j.jsx)("p",{children:"Add new item"})}),Object(j.jsx)(r.b,{to:"/",onClick:function(){return o.a.delete("/auth/logout").then((function(t){return console.log("response when log out",t),e.setUser(null),t.data})).catch((function(e){return e.response.data}))},children:Object(j.jsx)("p",{className:"logout",children:"Logout"})})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(r.b,{to:"/signup",children:Object(j.jsx)("p",{children:"Signup"})}),Object(j.jsx)(r.b,{to:"/login",children:Object(j.jsx)("p",{children:"Login"})})]})})}var d=n(2);function b(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),l=Object(i.a)(a,2),u=l[0],b=l[1],h=Object(c.useState)(""),p=Object(i.a)(h,2),m=p[0],O=p[1],g=Object(c.useState)(void 0),x=Object(i.a)(g,2),f=x[0],v=x[1],N=Object(d.g)();return Object(j.jsxs)("div",{className:"wrap",children:[Object(j.jsx)("h1",{className:"register-title",children:"Signup"}),Object(j.jsxs)("form",{className:"register",onSubmit:function(e){e.preventDefault();var t={email:n,password:m,name:u};o.a.post("/auth/signup",t).then((function(e){N("/login")})).catch((function(e){var t=e.response.data.message;v(t)}))},children:[Object(j.jsx)("input",{className:"register-input",placeholder:"Email address",type:"email",value:n,onChange:function(e){return s(e.target.value)}}),Object(j.jsx)("input",{className:"register-input",type:"text",placeholder:"Name",value:u,onChange:function(e){return b(e.target.value)}}),Object(j.jsx)("input",{className:"register-input",type:"password",value:m,placeholder:"Password",onChange:function(e){return O(e.target.value)}}),Object(j.jsx)("button",{type:"submit",className:"register-button",children:"Create an account"})]}),f&&Object(j.jsx)("p",{className:"error-message",children:f}),Object(j.jsx)("p",{className:"signup-p",children:"Already have an account?"}),Object(j.jsx)(r.b,{to:"/login",children:Object(j.jsx)("p",{className:"signup-p",children:"Login"})})]})}function h(e){var t=Object(c.useState)(""),n=Object(i.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)(""),l=Object(i.a)(r,2),u=l[0],b=l[1],h=Object(c.useState)(""),p=Object(i.a)(h,2),m=p[0],O=p[1],g=Object(d.g)();return Object(j.jsxs)("div",{className:"wrap",children:[Object(j.jsx)("h3",{className:"register-title",children:"Login"}),Object(j.jsxs)("form",{className:"register",onSubmit:function(t){t.preventDefault(),o.a.post("/auth/login",{email:s,password:u}).then((function(t){console.log("response when log-in",t),t.message?(a(""),b("")):(e.setUser(t.data),g("/items"))})).catch((function(e){console.log(e),O(e.response.data.message)}))},children:[Object(j.jsx)("input",{type:"email",placeholder:"Email address",className:"register-input",value:s,onChange:function(e){return a(e.target.value)}}),Object(j.jsx)("input",{type:"password",placeholder:"Password",className:"register-input",value:u,onChange:function(e){return b(e.target.value)}}),Object(j.jsx)("button",{className:"register-button",type:"submit",children:"Log in \ud83d\udd11"})]}),m&&Object(j.jsx)("p",{children:m})]})}function p(){return Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"home-container",children:[Object(j.jsx)("img",{className:"home-pic",src:"https://images.unsplash.com/photo-1445510861639-5651173bc5d5?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1659&q=80",alt:"pic"}),Object(j.jsxs)("div",{class:"centered",children:[Object(j.jsx)("h1",{className:"home-page-h1",children:"Welcome to furniture exchange"}),Object(j.jsx)("p",{className:"home-page-p",children:"Here is some explanation about the website, maybe some stupid quote"})]})]})})}var m=n(21);function O(e){return Object(j.jsx)("div",{children:Object(j.jsx)("button",{className:"button-84",children:e.children})})}function g(e){var t=e.title,n=(e.description,e.address),c=e.imageUrl,s=e._id;return Object(j.jsxs)("div",{className:"item-container",children:[Object(j.jsx)("div",{children:Object(j.jsx)("h2",{className:"item-title",children:t})}),Object(j.jsx)("div",{children:Object(j.jsx)("img",{src:c,alt:"pic",width:"250px"})}),Object(j.jsx)("div",{children:Object(j.jsx)("p",{children:n})}),Object(j.jsx)(r.b,{style:{textDecoration:"none"},to:"/items/".concat(s),children:Object(j.jsx)(O,{children:" More info "})})]})}function x(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),r=Object(i.a)(a,2),l=r[0],u=r[1],d=n.filter((function(e){return e.title.toLowerCase().includes(l.toLocaleLowerCase())}));return Object(c.useEffect)((function(){o.a.get("/api/items").then((function(e){console.log("this is response from getAllItems",e),s(e.data)})).catch((function(e){return console.log(e)}))}),[]),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"search-field",children:Object(j.jsx)("input",{type:"text",onChange:function(e){u(e.target.value)},className:"search-input",placeholder:"search here for items..."})}),Object(j.jsx)("div",{className:"item-container-main",children:d.map((function(e){return Object(j.jsx)(g,Object(m.a)({},e),e._id)}))})]})}var f=o.a.create({baseURL:"http://localhost:5005",withCredentials:!0}),v=function(e){throw e},N={service:f,getItems:function(){return o.a.get("/api/items").then((function(e){return e.data})).catch(v)},uploadImage:function(e){return o.a.post("/api/upload",e).then((function(e){return e.data})).catch(v)},createItem:function(e){return o.a.post("/api/items",e).then((function(e){return e.data})).catch(v)}};var w=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),r=Object(i.a)(a,2),l=r[0],u=r[1],b=Object(c.useState)(""),h=Object(i.a)(b,2),p=h[0],m=h[1],O=Object(c.useState)(""),g=Object(i.a)(O,2),x=g[0],f=g[1],v=Object(d.g)();return Object(j.jsxs)("div",{className:"wrap",children:[Object(j.jsx)("h2",{className:"register-title",children:"New Item"}),Object(j.jsxs)("form",{className:"register",onSubmit:function(e){e.preventDefault();var t={title:n,description:l,address:p,imageUrl:x};console.log("the image",x),o.a.post("/api/items",t).then((function(){v("/items")})).catch((function(e){return console.log(e)}))},children:[Object(j.jsx)("input",{className:"register-input",placeholder:"Title",type:"text",value:n,onChange:function(e){return s(e.target.value)}}),Object(j.jsx)("textarea",{className:"register-input",placeholder:"Add a description here",type:"text",value:l,onChange:function(e){return u(e.target.value)}}),Object(j.jsx)("input",{className:"register-input",placeholder:"Address",type:"text",value:p,onChange:function(e){return m(e.target.value)}}),Object(j.jsx)("input",{className:"register-input",name:"imageUrl",type:"file",onChange:function(e){console.log("The file to be uploaded is: ",e.target.files[0]);var t=new FormData;t.append("imageUrl",e.target.files[0]),N.uploadImage(t).then((function(e){console.log("response is: ",e),f(e.secure_url)})).catch((function(e){return console.log("Error while uploading the file: ",e)}))}}),Object(j.jsx)("button",{className:"register-button",type:"submit",children:"Add item"})]})]})};function S(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),l=Object(i.a)(a,2),u=l[0],b=l[1],h=Object(c.useState)([]),p=Object(i.a)(h,2),m=p[0],g=p[1],x=Object(d.g)(),f=Object(d.h)().id;console.log("this is item id",f),Object(c.useEffect)((function(){o.a.get("/api/items/".concat(f)).then((function(e){s(e.data)})).catch((function(e){return console.log(e)}))}),[f]);return Object(j.jsxs)(j.Fragment,{children:[n&&Object(j.jsxs)("div",{className:"item-detail-container",children:[Object(j.jsx)(r.b,{to:"/items",children:Object(j.jsx)("p",{children:" Back to items"})}),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:Object(j.jsx)("h1",{children:n.title})}),Object(j.jsx)("div",{children:Object(j.jsx)("p",{className:"item-detail-item",children:n.description})}),Object(j.jsx)("div",{children:Object(j.jsx)("img",{src:n.imageUrl,alt:n.title,width:"500px"})}),Object(j.jsx)("div",{children:Object(j.jsxs)("p",{children:[" Created by ",n.author.name]})}),Object(j.jsx)("div",{children:Object(j.jsx)("p",{className:"item-detail-item",children:n.address})}),Object(j.jsxs)("div",{className:"Buttons",children:[Object(j.jsx)("div",{className:"button1",children:Object(j.jsx)(r.b,{style:{textDecoration:"none"},to:"/items/edit/".concat(n._id),children:Object(j.jsx)(O,{children:" Edit item "})})}),Object(j.jsx)("div",{className:"button1",children:Object(j.jsx)("button",{className:"button-84",onClick:function(){o.a.delete("/api/items/".concat(f)).then((function(){x("/items")})).catch((function(e){return console.log(e)}))},children:" Delete item "})})]})]})]}),Object(j.jsxs)("div",{className:"comment-section",children:[Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o.a.post("/api/items/".concat(f,"/post"),{message:u}).then((function(e){console.log("response:",e),g(e.data.post),console.log("this is response data:",e.data),b("")}))},children:[Object(j.jsx)("textarea",{cols:"30",rows:"3",value:u,onChange:function(e){return b(e.target.value)}}),Object(j.jsx)("button",{type:"submit",children:"Send"})]}),m.map((function(e){return Object(j.jsx)("p",{children:e.message})}))]})]})}function y(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),r=Object(i.a)(a,2),l=r[0],u=r[1],b=Object(c.useState)(""),h=Object(i.a)(b,2),p=h[0],m=h[1],O=Object(c.useState)(""),g=Object(i.a)(O,2),x=g[0],f=g[1],v=Object(d.h)().id,w=Object(d.g)();Object(c.useEffect)((function(){o.a.get("/api/items/".concat(v)).then((function(e){var t=e.data,n=t.title,c=t.description,a=t.address,i=t.imageUrl;s(n),u(c),m(a),f(i)})).catch((function(e){return console.log(e)}))}),[v]);return Object(j.jsxs)("div",{className:"wrap",children:[Object(j.jsx)("h2",{className:"register-title",children:"Update Item"}),Object(j.jsxs)("form",{className:"register",onSubmit:function(e){e.preventDefault();var t={title:n,description:l,address:p,imageUrl:x};o.a.put("/api/items/".concat(v),t).then((function(e){w("/items/".concat(v))}))},children:[Object(j.jsx)("input",{className:"register-input",placeholder:"Title",type:"text",value:n,onChange:function(e){return s(e.target.value)}}),Object(j.jsxs)("textarea",{className:"register-input",placeholder:"Add a description here",type:"text",value:l,onChange:function(e){return u(e.target.value)},children:["  ",l," "]}),Object(j.jsx)("input",{className:"register-input",placeholder:"Address",type:"text",value:p,onChange:function(e){return m(e.target.value)}}),Object(j.jsx)("input",{className:"register-input",name:"imageUrl",type:"file",onChange:function(e){console.log("The file to be uploaded is: ",e.target.files[0]);var t=new FormData;t.append("imageUrl",e.target.files[0]),N.uploadImage(t).then((function(e){console.log("response is: ",e),f(e.secure_url)})).catch((function(e){return console.log("Error while uploading the file: ",e)}))}}),Object(j.jsx)("button",{className:"register-button",type:"submit",children:"Update item"})]})]})}function C(e){var t=e.children,n=e.redirectTo,c=e.user;return console.log("USER",c),c?t:Object(j.jsx)(d.a,{to:n})}var U=function(e){var t=Object(c.useState)(e.user),n=Object(i.a)(t,2),s=n[0],a=n[1],r=function(e){a(e)};return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(u,{user:s,setUser:r}),Object(j.jsxs)(d.d,{children:[Object(j.jsx)(d.b,{path:"/",element:Object(j.jsx)(p,{})}),Object(j.jsx)(d.b,{path:"/signup",element:Object(j.jsx)(b,{user:s})}),Object(j.jsx)(d.b,{path:"/items/:id",element:Object(j.jsx)(S,{})}),Object(j.jsx)(d.b,{path:"/items/edit/:id",element:Object(j.jsx)(y,{})}),Object(j.jsx)(d.b,{path:"/login",element:Object(j.jsx)(h,{user:s,setUser:r})}),Object(j.jsx)(d.b,{path:"/items",element:Object(j.jsx)(C,{redirectTo:"/login",user:s,children:Object(j.jsx)(x,{})})}),Object(j.jsx)(d.b,{path:"/items/add",element:Object(j.jsx)(C,{redirectTo:"/login",user:s,children:Object(j.jsx)(w,{})})})]})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),a(e),i(e)}))};o.a.get("/auth/loggedin").then((function(e){console.log("logged in user: ",e.data);var t=e.data;a.a.render(Object(j.jsx)(r.a,{children:Object(j.jsx)(U,{user:t})}),document.getElementById("root"))})),D()}},[[47,1,2]]]);
//# sourceMappingURL=main.b68313d3.chunk.js.map